openapi: 3.0.1
info:
  title: E-Commerce Service
  description: ğŸ›’ e-ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤
  contact:
    name: Github Repository
    url: https://github.com/eunsol-an/e-commerce-server
  version: "1.0"
servers:
- url: http://localhost:8080
  description: Generated server url
tags:
- name: í¬ì¸íŠ¸
  description: í¬ì¸íŠ¸ ê´€ë ¨ API
- name: ìƒí’ˆ
  description: ìƒí’ˆ ê´€ë ¨ API
- name: ì£¼ë¬¸
  description: ì£¼ë¬¸ ê´€ë ¨ API
- name: ì¿ í°
  description: ì¿ í° ê´€ë ¨ API
paths:
  /points/charge:
    post:
      tags:
      - í¬ì¸íŠ¸
      summary: í¬ì¸íŠ¸ ì¶©ì „
      description: ì‚¬ìš©ìì˜ í¬ì¸íŠ¸ë¥¼ ìš”ì²­í•œ ê¸ˆì•¡ë§Œí¼ ì¶©ì „í•©ë‹ˆë‹¤.
      operationId: chargePoint
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PointChargeRequest"
        required: true
      responses:
        "200":
          description: ì¶©ì „ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BalanceResponse"
        "500":
          description: ì„œë²„ ì—ëŸ¬
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì„œë²„ ì—ëŸ¬:
                  summary: í¬ì¸íŠ¸ ì¶©ì „ ì¤‘ ì„œë²„ ì—ëŸ¬ ë°œìƒ
                  description: ì„œë²„ ì—ëŸ¬
                  value:
                    code: 500
                    message: INTERNAL SERVER ERROR
        "400":
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì˜ëª»ëœ ì¶©ì „ ê¸ˆì•¡:
                  summary: ê¸ˆì•¡ì´ 0 ì´í•˜
                  description: ì˜ëª»ëœ ì¶©ì „ ê¸ˆì•¡
                  value:
                    code: 400
                    message: INVALID REQUEST
        "404":
          description: ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì—†ëŠ” ìœ ì €:
                  summary: ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
                  description: ì—†ëŠ” ìœ ì €
                  value:
                    code: 404
                    message: USER NOT FOUND
  /orders:
    post:
      tags:
      - ì£¼ë¬¸
      summary: ì£¼ë¬¸ ìƒì„±
      description: ì‚¬ìš©ìì˜ ì£¼ë¬¸ì„ ìƒì„±í•©ë‹ˆë‹¤.
      operationId: placeOrder
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrderRequest"
        required: true
      responses:
        "400":
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì˜ëª»ëœ ìƒí’ˆ ìš”ì²­:
                  summary: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìƒí’ˆ ID í¬í•¨
                  description: ì˜ëª»ëœ ìƒí’ˆ ìš”ì²­
                  value:
                    code: 400
                    message: INVALID PRODUCT ID
                ì¿ í° ì—†ìŒ:
                  summary: "í•´ë‹¹ ì¿ í°ì„ ë³´ìœ í•˜ê³  ìˆì§€ ì•Šê±°ë‚˜, ì´ë¯¸ ì‚¬ìš©í•¨"
                  description: ì¿ í° ì—†ìŒ
                  value:
                    code: 400
                    message: INVALID COUPON ID
        "200":
          description: ì£¼ë¬¸ ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderResponse"
        "409":
          description: ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì¬ê³  ë¶€ì¡±:
                  summary: ìƒí’ˆì˜ ì¬ê³ ê°€ ë¶€ì¡±í•¨
                  description: ì¬ê³  ë¶€ì¡±
                  value:
                    code: 409
                    message: OUT OF STOCK
        "404":
          description: ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ìœ ì € ì—†ìŒ:
                  summary: ì£¼ë¬¸í•˜ë ¤ëŠ” ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
                  description: ìœ ì € ì—†ìŒ
                  value:
                    code: 404
                    message: USER NOT FOUND
        "402":
          description: ê²°ì œ í•„ìš”
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì”ì•¡ ë¶€ì¡±:
                  summary: ì”ì•¡ì´ ë¶€ì¡±í•¨
                  description: ì”ì•¡ ë¶€ì¡±
                  value:
                    code: 402
                    message: PAYMENT REQUIRED
        "500":
          description: ì„œë²„ ì—ëŸ¬
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì„œë²„ ì—ëŸ¬:
                  summary: ì£¼ë¬¸ ì²˜ë¦¬ ì¤‘ ì„œë²„ ì—ëŸ¬ ë°œìƒ
                  description: ì„œë²„ ì—ëŸ¬
                  value:
                    code: 500
                    message: INTERNAL SERVER ERROR
  /coupons/issue:
    post:
      tags:
      - ì¿ í°
      summary: ì¿ í° ë°œê¸‰
      description: ì‚¬ìš©ìì—ê²Œ ì¿ í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤.
      operationId: issueCoupon
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CouponIssueRequest"
        required: true
      responses:
        "404":
          description: ì‚¬ìš©ì ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ìœ ì € ì—†ìŒ:
                  summary: í•´ë‹¹ ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
                  description: ìœ ì € ì—†ìŒ
                  value:
                    code: 404
                    message: USER NOT FOUND
        "409":
          description: ìš”ì²­ ì¶©ëŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì¿ í° ì†Œì§„:
                  summary: ì”ì—¬ ì¿ í° ì—†ìŒ
                  description: ì¿ í° ì†Œì§„
                  value:
                    code: 409
                    message: CONFLICT
        "500":
          description: ì„œë²„ ì—ëŸ¬
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì„œë²„ ì—ëŸ¬:
                  summary: ì¿ í° ë°œê¸‰ ì¤‘ ì„œë²„ ì—ëŸ¬ ë°œìƒ
                  description: ì„œë²„ ì—ëŸ¬
                  value:
                    code: 500
                    message: INTERNAL SERVER ERROR
        "200":
          description: ì¿ í° ë°œê¸‰ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CouponIssueResponse"
        "400":
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì˜ëª»ëœ ìš”ì²­:
                  summary: ì´ë¯¸ ë°œê¸‰í•œ ìœ ì €
                  description: ì˜ëª»ëœ ìš”ì²­
                  value:
                    code: 400
                    message: INVALID REQUEST
  /products:
    get:
      tags:
      - ìƒí’ˆ
      summary: ì „ì²´ ìƒí’ˆ ì¡°íšŒ
      description: ëª¨ë“  ìƒí’ˆ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getAllProducts
      responses:
        "200":
          description: ìƒí’ˆ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"
        "500":
          description: ì„œë²„ ì—ëŸ¬
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì„œë²„ ì—ëŸ¬:
                  summary: ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ì¤‘ ì„œë²„ ì—ëŸ¬ ë°œìƒ
                  description: ì„œë²„ ì—ëŸ¬
                  value:
                    code: 500
                    message: INTERNAL SERVER ERROR
  /products/popular:
    get:
      tags:
      - ìƒí’ˆ
      summary: ì¸ê¸° ìƒí’ˆ ì¡°íšŒ
      description: ì¸ê¸° ìƒí’ˆ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getPopularProducts
      responses:
        "500":
          description: ì„œë²„ ì—ëŸ¬
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì„œë²„ ì—ëŸ¬:
                  summary: ì¸ê¸° ìƒí’ˆ ì¡°íšŒ ì¤‘ ì„œë²„ ì—ëŸ¬ ë°œìƒ
                  description: ì„œë²„ ì—ëŸ¬
                  value:
                    code: 500
                    message: INTERNAL SERVER ERROR
        "200":
          description: ì¸ê¸° ìƒí’ˆ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PopularProductResponse"
  /points:
    get:
      tags:
      - í¬ì¸íŠ¸
      summary: í¬ì¸íŠ¸ ì”ì•¡ ì¡°íšŒ
      description: ì‚¬ìš©ìì˜ í˜„ì¬ í¬ì¸íŠ¸ ì”ì•¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getBalance
      parameters:
      - name: userId
        in: query
        description: ì¡°íšŒí•  ì‚¬ìš©ì ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: ì”ì•¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BalanceResponse"
        "404":
          description: ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì—†ëŠ” ìœ ì €:
                  summary: ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
                  description: ì—†ëŠ” ìœ ì €
                  value:
                    code: 404
                    message: USER NOT FOUND
  /coupons:
    get:
      tags:
      - ì¿ í°
      summary: ì¿ í° ëª©ë¡ ì¡°íšŒ
      description: ì‚¬ìš©ìì˜ ì¿ í° ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getCoupons
      parameters:
      - name: userId
        in: query
        description: ì¡°íšŒí•  ì‚¬ìš©ì ID
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: ì¿ í° ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CouponListResponse"
        "404":
          description: ì‚¬ìš©ì ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ìœ ì € ì—†ìŒ:
                  summary: í•´ë‹¹ ìœ ì €ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
                  description: ìœ ì € ì—†ìŒ
                  value:
                    code: 404
                    message: USER NOT FOUND
        "500":
          description: ì„œë²„ ì—ëŸ¬
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiException"
              examples:
                ì„œë²„ ì—ëŸ¬:
                  summary: ì¿ í° ì¡°íšŒ ì¤‘ ì„œë²„ ì—ëŸ¬ ë°œìƒ
                  description: ì„œë²„ ì—ëŸ¬
                  value:
                    code: 500
                    message: INTERNAL SERVER ERROR
components:
  schemas:
    PointChargeRequest:
      type: object
      properties:
        userId:
          type: integer
          description: ìœ ì € ID
          format: int64
          example: 1
        amount:
          type: integer
          description: ì¶©ì „ ê¸ˆì•¡
          format: int64
          example: 1000
      description: ì¶©ì „ ìš”ì²­ ì •ë³´
    BalanceResponse:
      type: object
      properties:
        userId:
          type: integer
          description: ìœ ì € ID
          format: int64
          example: 1
        balance:
          type: integer
          description: ì”ì•¡
          format: int64
          example: 1000
      description: ì”ì•¡ Response
    ApiException:
      type: object
      properties:
        cause:
          type: object
          properties:
            stackTrace:
              type: array
              items:
                type: object
                properties:
                  classLoaderName:
                    type: string
                  moduleName:
                    type: string
                  moduleVersion:
                    type: string
                  methodName:
                    type: string
                  fileName:
                    type: string
                  lineNumber:
                    type: integer
                    format: int32
                  nativeMethod:
                    type: boolean
                  className:
                    type: string
            message:
              type: string
            localizedMessage:
              type: string
        stackTrace:
          type: array
          items:
            type: object
            properties:
              classLoaderName:
                type: string
              moduleName:
                type: string
              moduleVersion:
                type: string
              methodName:
                type: string
              fileName:
                type: string
              lineNumber:
                type: integer
                format: int32
              nativeMethod:
                type: boolean
              className:
                type: string
        errorCode:
          type: string
          enum:
          - INVALID_INPUT_VALUE
          - ENTITY_NOT_FOUND
          - DUPLICATE_RESOURCE
          - UNAUTHORIZED
          - FORBIDDEN
          - INTERNAL_SERVER_ERROR
        message:
          type: string
        suppressed:
          type: array
          items:
            type: object
            properties:
              stackTrace:
                type: array
                items:
                  type: object
                  properties:
                    classLoaderName:
                      type: string
                    moduleName:
                      type: string
                    moduleVersion:
                      type: string
                    methodName:
                      type: string
                    fileName:
                      type: string
                    lineNumber:
                      type: integer
                      format: int32
                    nativeMethod:
                      type: boolean
                    className:
                      type: string
              message:
                type: string
              localizedMessage:
                type: string
        localizedMessage:
          type: string
    OrderItemRequest:
      type: object
      properties:
        productId:
          type: integer
          description: ìƒí’ˆ ID
          format: int64
          example: 1
        quantity:
          type: integer
          description: ì£¼ë¬¸ ìˆ˜ëŸ‰
          format: int32
          example: 2
      description: ì£¼ë¬¸ ì•„ì´í…œ Request
      example:
        code: 500
        message: INTERNAL SERVER ERROR
    OrderRequest:
      type: object
      properties:
        userId:
          type: integer
          description: ìœ ì € ID
          format: int64
          example: 1
        items:
          type: array
          description: ì£¼ë¬¸ ì•„ì´í…œ ëª©ë¡
          example:
            code: 500
            message: INTERNAL SERVER ERROR
          items:
            $ref: "#/components/schemas/OrderItemRequest"
        couponId:
          type: integer
          description: ì¿ í° ID
          format: int64
          example: 10
      description: ì£¼ë¬¸ ìš”ì²­ Request
    OrderItemResponse:
      type: object
      properties:
        productId:
          type: integer
          description: ìƒí’ˆ ID
          format: int64
          example: 1
        name:
          type: string
          description: ìƒí’ˆëª…
          example: ë¨¸ì‰¬ë£¸ ìŠ¤íƒ ë“œ
        price:
          type: integer
          description: ìƒí’ˆ ê°€ê²©
          format: int64
          example: 32000
        quantity:
          type: integer
          description: ì¬ê³  ìˆ˜ëŸ‰
          format: int32
          example: 100
      description: ì£¼ë¬¸ ì•„ì´í…œ Response
      example: 1
    OrderResponse:
      type: object
      properties:
        orderId:
          type: integer
          description: ì£¼ë¬¸ ID
          format: int64
          example: 1
        totalItemPrice:
          type: integer
          description: ì´ ìƒí’ˆ ê¸ˆì•¡
          format: int64
          example: 47000
        discountAmount:
          type: integer
          description: í• ì¸ ê¸ˆì•¡
          format: int64
          example: 1000
        paidAmount:
          type: integer
          description: ì´ ê²°ì œ ê¸ˆì•¡
          format: int64
          example: 46000
        items:
          type: array
          description: ì£¼ë¬¸ ì•„ì´í…œ ëª©ë¡
          example: 1
          items:
            $ref: "#/components/schemas/OrderItemResponse"
      description: ì£¼ë¬¸ ìš”ì²­ Response
    CouponIssueRequest:
      type: object
      properties:
        userId:
          type: integer
          description: ìœ ì € ID
          format: int64
          example: 1
        couponId:
          type: integer
          description: ì¿ í° ID
          format: int64
          example: 10
      description: ì¿ í° ë°œê¸‰ ìš”ì²­ ì •ë³´
    CouponIssueResponse:
      type: object
      properties:
        couponId:
          type: integer
          description: ì¿ í° ID
          format: int64
          example: 10
        discountAmount:
          type: integer
          description: í• ì¸ ê¸ˆì•¡
          format: int32
          example: 1000
        expiredAt:
          type: string
          description: ë§Œë£Œì¼
          format: date-time
      description: ì¿ í° ë°œê¸‰ Response
    ProductResponse:
      type: object
      properties:
        productId:
          type: integer
          description: ìƒí’ˆ ID
          format: int64
          example: 1
        name:
          type: string
          description: ìƒí’ˆëª…
          example: ë¨¸ì‰¬ë£¸ ìŠ¤íƒ ë“œ
        price:
          type: integer
          description: ìƒí’ˆ ê°€ê²©
          format: int64
          example: 32000
        stockQuantity:
          type: integer
          description: ì¬ê³ ëŸ‰
          format: int32
          example: 100
      description: ìƒí’ˆ ì¡°íšŒ Response
    PopularProductResponse:
      type: object
      properties:
        productId:
          type: integer
          description: ìƒí’ˆ ID
          format: int64
          example: 1
        name:
          type: string
          description: ìƒí’ˆëª…
          example: ë¨¸ì‰¬ë£¸ ìŠ¤íƒ ë“œ
        totalSales:
          type: integer
          description: ì´ íŒë§¤ ê¸ˆì•¡
          format: int64
          example: 3200000
        quantitySold:
          type: integer
          description: ì´ íŒë§¤ ìˆ˜ëŸ‰
          format: int32
          example: 100
      description: ìƒìœ„ ìƒí’ˆ ì¡°íšŒ Response
    CouponListResponse:
      type: object
      properties:
        couponId:
          type: integer
          description: ì¿ í° ID
          format: int64
          example: 10
        discountAmount:
          type: integer
          description: í• ì¸ ê¸ˆì•¡
          format: int32
          example: 1000
        status:
          type: string
          description: ì¿ í° ìƒíƒœ
          example: ISSUED
        expiredAt:
          type: string
          description: ë§Œë£Œì¼
          format: date-time
      description: ë³´ìœ  ì¿ í° ì¡°íšŒ Response
